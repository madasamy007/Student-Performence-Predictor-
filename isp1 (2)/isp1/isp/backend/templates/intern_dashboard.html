{% extends "base.html" %}

{% block title %}Intern Dashboard{% endblock %}

{% block content %}
    <h2>Welcome, {{ username }}!</h2>
    <p>Here's a quick overview of your progress and key actions.</p>

    <div class="dashboard-cards">
        <a href="{{ url_for('intern_tasks') }}" class="card" data-color="blue">
            <div class="icon">ğŸ“</div>
            <h3>My Tasks</h3>
            <p>View your assigned tasks and their status.</p>
        </a>
        <a href="{{ url_for('intern_attendance') }}" class="card" data-color="green">
            <div class="icon">ğŸ“…</div>
            <h3>My Attendance</h3>
            <p>Check your attendance records.</p>
        </a>
        <a href="{{ url_for('intern_performance') }}" class="card" data-color="orange">
            <div class="icon">ğŸ“ˆ</div>
            <h3>My Performance</h3>
            <p>See your overall performance and detailed breakdown.</p>
        </a>
        <a href="{{ url_for('intern_feedback') }}" class="card" data-color="pink">
            <div class="icon">ğŸ’¬</div>
            <h3>My Feedback</h3>
            <p>Review feedback from administrators.</p>
        </a>
        <a href="{{ url_for('intern_courses') }}" class="card" data-color="purple">
            <div class="icon">ğŸ“š</div>
            <h3>My Courses</h3>
            <p>Explore available courses.</p>
        </a>
        <a href="{{ url_for('intern_send_feedback') }}" class="card" data-color="teal"> {# New Link #}
            <div class="icon">âœ‰ï¸</div>
            <h3>Send Feedback to Admin</h3>
            <p>Send your questions or suggestions.</p>
        </a>
        <a href="{{ url_for('intern_profile') }}" class="card" data-color="gray">
            <div class="icon">ğŸ‘¤</div>
            <h3>My Profile</h3>
            <p>View and update your profile details.</p>
        </a>
        <a href="{{ url_for('intern_leave_permission') }}" class="card" data-color="red">
            <div class="icon">âœˆï¸</div>
            <h3>Leave Permission</h3>
            <p>Apply for leave or check leave status.</p>
        </a>
    </div>

    <div class="dashboard-stats">
        <div class="stat-card">
            <h3>Today's Attendance</h3>
            <p>{{ today_attendance_status|capitalize }}</p>
        </div>
        <div class="stat-card">
            <h3>Overall Performance</h3>
            <p>{{ overall_score }}% ({{ predicted_performance }})</p>
        </div>
        {# You can add more dynamic stats here, e.g., tasks completed, next due task #}
    </div>

    <div class="info-section" style="margin-top: 30px;">
        <h3>Your Assigned Tasks (Latest)</h3>
        {% if tasks %}
            <table>
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Due Date</th>
                        <th>Status</th>
                        <th>Mark</th>
                    </tr>
                </thead>
                <tbody>
                    {% for task in tasks %}
                        <tr>
                            <td>{{ task[0] }}</td>
                            <td>{{ task[2] }}</td>
                            <td>{{ task[3]|capitalize }}</td>
                            <td>{{ task[4] if task[4] is not none else 'N/A' }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>No tasks assigned to you yet.</p>
        {% endif %}
    </div>

    <div class="info-section" style="margin-top: 30px;">
        <h3>Suggested Courses</h3>
        {% if suggested_courses %}
            <ul>
                {% for course in suggested_courses %}
                    <li>{{ course }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No courses available at the moment.</p>
        {% endif %}
    </div>
{% endblock %}
